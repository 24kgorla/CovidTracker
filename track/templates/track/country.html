{% extends "base.html" %}
{% load track_tags %}

{% block title %} COVID Data for {{ country }}{% endblock %}

{% block content %}
	{% if Data|is_str == 'str' %}
		<h1>No Data for country</h1>
		<p>Please try again by changing up the search query</p>
	{% else %}
		<h2>COVID Data for Country:</h2>
		<canvas style="height:100px" id="myChart"></canvas>
			<script>
				var myChart = document.getElementById('myChart').getContext('2d');
				var Chart = new Chart(myChart, {
						type:'pie', // bar, horizontalBar, pie, line, donut, radar, polarArea
						data:{
							labels:["Total Cases", "Total Deaths"],
							datasets:[{
								label:'New Cases',
								data:[{{ ChartTotalCases }}, {{ ChartTotalDeaths }}]
							}],
							backgroundColor:'green'
						},
						options:{
							title:{
								display:true,
								text:'Total Cases vs Total Deaths'
							}


						}
				});
			</script>
			<p>{{ ChartNewCases }}</p>
			<table class="table table-hover pt-3">
			<thead>
				<tr>
					<th scope="col">Date</th>
					<th scope="col">New Cases</th>
					<th scope="col">Total Cases</th>
					<th scope="col">New Deaths</th>
					<th scope="col">Total Deaths</th>
				</tr>
			</thead>
			{% for Date, NewCases, TotalCases, NewDeaths, TotalDeaths in Data %}

			<tbody>
					<tr class="table-active">
						<th scope="row">{{ Date }}</th>
						<td>{{ NewCases }}</td>
						<td>{{ TotalCases }}</td>
						<td>{{ NewDeaths }}</td>
						<td>{{ TotalDeaths }}</td>
					</tr>
			{% endfor %}
		</tbody>
		</table>
	{% endif %}
{% endblock %}
